(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{58:function(e,t,a){e.exports=a(82)},63:function(e,t,a){},64:function(e,t,a){},80:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(7),i=a.n(o),r=(a(63),a(14)),c=a(29),s=a(15),u=a(37),p=a(38),d=a(42),m=(a(64),a(35)),h=(a(80),1),f="ABCDEFGHIJKLMNOPQRSTUVWXYZ",g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onMapClicked=function(e,t,n){var l={id:h.toString(),name:h.toString(),position:n.latLng};h++,a.props.handleAdd(l)},a.onRemove=function(e,t){a.props.handleRemove(t.name)},a.state={initialCenter:e.places.length>0?e.places[0].position:{lat:49.01386,lng:8.41965},calculated:e.calculated,polyline:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(m.Map,{google:this.props.google,zoom:15,containerStyle:v,clickableIcons:!0,initialCenter:this.state.initialCenter,onClick:this.onMapClicked},this.props.places.map((function(t,a){return l.a.createElement(m.Marker,{key:t.id,name:t.name,position:t.position,onClick:e.onRemove,label:f[a%f.length]})})),l.a.createElement(m.Polyline,{fillColor:"#0000FF",fillOpacity:.35,path:this.props.calculated?this.props.places.map((function(e){return e.position})):[],strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2}))}}]),t}(l.a.Component),v={width:"100%",height:"67%",position:"absolute"},C=Object(m.GoogleApiWrapper)({apiKey:"AIzaSyB56Buw0gtaZzwgFsErJDlZPSxrKvdihCs"})(g),E=a(124),b=a(132),w=a(133),y=a(122),k=a(129),O=a(131),M=a(128),A=a(126),S=a(127),I=a(125),j=a(118),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleAdd=function(e){9===a.state.places.length?a.setState((function(e){return{warningOpen:!0}})):a.setState((function(t){return{places:t.places.concat([e])}}))},a.handleRemove=function(e){var t=a.state.places.findIndex((function(t){return t.id===e}));if(t>-1){var n=a.state.places.slice();n.splice(t,1),a.setState((function(e){return{places:n}}))}},a.handleModeChange=function(e,t){a.setState((function(e){return{transportationMode:t.props.value}}))},a.handleWarningClose=function(){a.setState((function(e){return{warningOpen:!1}}))},a.componentDidMount=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t={id:"0",name:"0",position:{lat:e.coords.latitude,lng:e.coords.longitude}};a.handleAdd(t)}))},a.onCalculate=function(){var e=a.state.places.map((function(e){return e.position}));(new window.google.maps.DistanceMatrixService).getDistanceMatrix({origins:e,destinations:e,travelMode:a.state.transportationMode},(function(e,t){"OK"===t?a.calculateRoundtrip(e):console.log(t)}))},a.calculateRoundtrip=function(e){for(var t=a.state.places.length,n=Object(r.a)(a.state.places.keys()).slice(1),l=new Array(t),o=0;o<t;o++)l[o]=e.rows[o].elements.map((function(e){return e.duration.value}));var i=a.permute(n);i.map((function(e){return e.unshift(0)})),i.map((function(e){return e.push(0)}));var c=Number.MAX_SAFE_INTEGER,s=0;for(o=0;o<i.length;o++){var u=a.calculatePathCost(i[o],l);u<c&&(c=u,s=o)}var p=i[s].map((function(e){return a.state.places[e]}));p.pop(),a.setState((function(e){return{calculated:!0,places:p}}))},a.calculatePathCost=function(e,t){for(var a=0,n=0;n<e.length-1;n++){var l=e[n],o=e[n+1];a+=t[l][o]}return a},a.permute=function(e){for(var t,a,n=e.length,l=[e.slice()],o=new Array(n).fill(0),i=1;i<n;)o[i]<i?(t=i%2&&o[i],a=e[i],e[i]=e[t],e[t]=a,++o[i],i=1,l.push(e.slice())):(o[i]=0,++i);return l},a.onClear=function(){a.setState((function(e){return{places:[],calculated:!1}}))},a.state={places:[],transportationMode:"WALKING",warningOpen:!1,calculated:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"Shortest Roundtrip Calculator"),l.a.createElement("h3",null,"Click on the map to select up to nine places you want to go."),l.a.createElement(j.a,{container:!0,justify:"center",className:"classes.root",spacing:2},l.a.createElement(j.a,{item:!0,xs:4,sm:2},l.a.createElement(y.a,{fullWidth:"true"},l.a.createElement(b.a,{id:"select-label"},"Mode of transportation"),l.a.createElement(k.a,{labelId:"select-label",id:"mode-select",value:this.state.transportationMode,onChange:this.handleModeChange},l.a.createElement(w.a,{value:"WALKING"},"Walking"),l.a.createElement(w.a,{value:"BICYCLING"},"Bicycling"),l.a.createElement(w.a,{value:"TRANSIT"},"Public Transit"),l.a.createElement(w.a,{value:"DRIVING"},"Driving")))),l.a.createElement(j.a,{item:!0,xs:12},l.a.createElement(j.a,{container:!0,justify:"center",spacing:2},l.a.createElement(j.a,{item:!0},l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.onCalculate},this.state.calculated?"Recalculate":"Calculate")),l.a.createElement(j.a,{item:!0},l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.onClear,disabled:!this.state.places===[]},"Clear")))),l.a.createElement(j.a,{item:!0,xs:12},l.a.createElement(C,{handleAdd:this.handleAdd,handleRemove:this.handleRemove,places:this.state.places,calculated:this.state.calculated}))),l.a.createElement(O.a,{open:this.state.warningOpen,onClose:this.handleWarningClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(I.a,{id:"alert-dialog-title"},"Maximum number of places exceeded"),l.a.createElement(A.a,null,l.a.createElement(S.a,{id:"alert-dialog-description"},"Due to limitations of the free version of the Google Maps API the maximum number of places available is nine.")),l.a.createElement(M.a,null,l.a.createElement(E.a,{onClick:this.handleWarningClose,color:"primary"},"Close"))))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[58,1,2]]]);
//# sourceMappingURL=main.0467586a.chunk.js.map