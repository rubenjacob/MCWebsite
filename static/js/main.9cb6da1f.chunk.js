(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{57:function(e,t,a){e.exports=a(81)},62:function(e,t,a){},63:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(7),i=a.n(l),r=(a(62),a(14)),c=a(29),s=a(15),u=a(37),p=a(38),d=a(42),h=(a(63),a(35)),m=(a(79),1),f="ABCDEFGHIJKLMNOPQRSTUVWXYZ",g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onMapClicked=function(e,t,n){var o={id:m.toString(),name:m.toString(),position:n.latLng};m++,a.props.handleAdd(o)},a.onRemove=function(e,t){a.props.handleRemove(t.name)},a.state={initialCenter:e.places.length>0?e.places[0].position:{lat:49.01386,lng:8.41965},calculated:e.calculated,polyline:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(h.Map,{google:this.props.google,zoom:15,containerStyle:v,clickableIcons:!0,initialCenter:this.state.initialCenter,onClick:this.onMapClicked},this.props.places.map((function(t,a){return o.a.createElement(h.Marker,{key:t.id,name:t.name,position:t.position,onClick:e.onRemove,label:f[a%f.length]})})),o.a.createElement(h.Polyline,{fillColor:"#0000FF",fillOpacity:.35,path:this.props.calculated?this.props.places.map((function(e){return e.position})):[],strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2}))}}]),t}(o.a.Component),v={width:"100%",height:"80%",position:"absolute"},C=Object(h.GoogleApiWrapper)({apiKey:"AIzaSyB56Buw0gtaZzwgFsErJDlZPSxrKvdihCs"})(g),b=a(120),E=a(128),w=a(129),k=a(115),y=a(125),O=a(127),M=a(124),A=a(122),S=a(123),I=a(121),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleAdd=function(e){9===a.state.places.length?a.setState((function(e){return{warningOpen:!0}})):a.setState((function(t){return{places:t.places.concat([e])}}))},a.handleRemove=function(e){var t=a.state.places.findIndex((function(t){return t.id===e}));if(t>-1){var n=a.state.places.slice();n.splice(t,1),a.setState((function(e){return{places:n}}))}},a.handleModeChange=function(e,t){a.setState((function(e){return{transportationMode:t.props.value}}))},a.handleWarningClose=function(){a.setState((function(e){return{warningOpen:!1}}))},a.componentDidMount=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t={id:"0",name:"0",position:{lat:e.coords.latitude,lng:e.coords.longitude}};a.handleAdd(t)}))},a.onCalculate=function(){var e=a.state.places.map((function(e){return e.position}));(new window.google.maps.DistanceMatrixService).getDistanceMatrix({origins:e,destinations:e,travelMode:a.state.transportationMode},(function(e,t){"OK"===t?a.calculateRoundtrip(e):console.log(t)}))},a.calculateRoundtrip=function(e){for(var t=a.state.places.length,n=Object(r.a)(a.state.places.keys()).slice(1),o=new Array(t),l=0;l<t;l++)o[l]=e.rows[l].elements.map((function(e){return e.duration.value}));var i=a.permute(n);i.map((function(e){return e.unshift(0)})),i.map((function(e){return e.push(0)}));var c=Number.MAX_SAFE_INTEGER,s=0;for(l=0;l<i.length;l++){var u=a.calculatePathCost(i[l],o);u<c&&(c=u,s=l)}var p=i[s].map((function(e){return a.state.places[e]}));p.pop(),a.setState((function(e){return{calculated:!0,places:p}}))},a.calculatePathCost=function(e,t){for(var a=0,n=0;n<e.length-1;n++){var o=e[n],l=e[n+1];a+=t[o][l]}return a},a.permute=function(e){for(var t,a,n=e.length,o=[e.slice()],l=new Array(n).fill(0),i=1;i<n;)l[i]<i?(t=i%2&&l[i],a=e[i],e[i]=e[t],e[t]=a,++l[i],i=1,o.push(e.slice())):(l[i]=0,++i);return o},a.onClear=function(){a.setState((function(e){return{places:[],calculated:!1}}))},a.state={places:[],transportationMode:"WALKING",warningOpen:!1,calculated:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"Shortest Roundtrip Calculator"),o.a.createElement("h3",null,"Click on the map to select up to nine places you want to go."),o.a.createElement(k.a,null,o.a.createElement(E.a,{id:"select-label"},"Mode of transportation"),o.a.createElement(y.a,{labelId:"select-label",id:"mode-select",value:this.state.transportationMode,onChange:this.handleModeChange},o.a.createElement(w.a,{value:"WALKING"},"Walking"),o.a.createElement(w.a,{value:"BICYCLING"},"Bicycling"),o.a.createElement(w.a,{value:"TRANSIT"},"Public Transit"),o.a.createElement(w.a,{value:"DRIVING"},"Driving"))),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.onCalculate,disabled:this.state.calculated},"Calculate"),o.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.onClear,disabled:!this.state.calculated},"Clear"),o.a.createElement(C,{handleAdd:this.handleAdd,handleRemove:this.handleRemove,places:this.state.places,calculated:this.state.calculated}),o.a.createElement(O.a,{open:this.state.warningOpen,onClose:this.handleWarningClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(I.a,{id:"alert-dialog-title"},"Maximum number of places exceeded"),o.a.createElement(A.a,null,o.a.createElement(S.a,{id:"alert-dialog-description"},"Due to limitations of the free version of the Google Maps API the maximum number of places available is nine.")),o.a.createElement(M.a,null,o.a.createElement(b.a,{onClick:this.handleWarningClose,color:"primary"},"Close"))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[57,1,2]]]);
//# sourceMappingURL=main.9cb6da1f.chunk.js.map